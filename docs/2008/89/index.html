<p>En MySQL 5 databas, med följande tabeller (primärnycklar framhävda):</p><p>user : <em>id</em> : name : email</p><p>group : <em>id</em> : value</p><p>groups : <em>userid</em> : <em>groupid</em></p><p>Min mycket eliminenta uppgift var att åstadkomma en SQL query som ger följande resultat:</p><p>id name email groups</p><hr><p>1 Anders <a href=mailto:&#97;&#x6e;&#x64;&#x65;&#x72;&#115;&#64;&#x6d;&#x61;&#100;&#114;&#x2e;&#x73;&#x65;>&#97;&#x6e;&#x64;&#x65;&#x72;&#115;&#64;&#x6d;&#x61;&#100;&#114;&#x2e;&#x73;&#x65;</a> root,writer,user</p><p>Efter litet manualläsande och googlande kom jag fram till att <code>group_concat</code> uppnådde det jag ville göra.</p><ol><li><code>select</code></li><li><code>user.*,</code></li><li><code>group_concat(`group`.value) as `groups`</code></li><li><code>from user</code></li><li><code>left join (`groups`,`group`)</code></li><li><code>on (`groups`.userid=user.id and</code></li><li><code>`group`.id=`groups`.groupid)</code></li><li><code>group by `groups`.userid;</code></li></ol><h2 id=det-m-ste-finnas-n-gra-nackdelar->Det måste finnas några nackdelar!</h2><p>Jag erkänner att SQL inte är min starka sida och därför vill jag nu ha hjälp. Vilka index bör jag sätta förutom nycklarna, om några? Finns det bättre och skonsammare sätt än <code>group_concat</code>?</p>