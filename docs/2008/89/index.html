<p>En MySQL 5 databas, med f&#xF6;ljande tabeller (prim&#xE4;rnycklar framh&#xE4;vda):</p><p>user : <em>id</em> : name : email</p><p>group : <em>id</em> : value</p><p>groups : <em>userid</em> : <em>groupid</em></p><p>Min mycket eliminenta uppgift var att &#xE5;stadkomma en SQL query som ger f&#xF6;ljande resultat:</p><p>id name email groups</p><hr><p>1 Anders <a href=mailto:anders@madr.se>anders@madr.se</a> root,writer,user</p><p>Efter litet manuall&#xE4;sande och googlande kom jag fram till att <code>group_concat</code> uppn&#xE5;dde det jag ville g&#xF6;ra.</p><ol><li><code>select</code></li><li><code>user.*,</code></li><li><code>group_concat(`group`.value) as `groups`</code></li><li><code>from user</code></li><li><code>left join (`groups`,`group`)</code></li><li><code>on (`groups`.userid=user.id and</code></li><li><code>`group`.id=`groups`.groupid)</code></li><li><code>group by `groups`.userid;</code></li></ol><h2 id=det-mste-finnas-ngra-nackdelar>Det m&#xE5;ste finnas n&#xE5;gra nackdelar!<a class=anchor href=#det-mste-finnas-ngra-nackdelar>&#xB6;</a></h2><p>Jag erk&#xE4;nner att SQL inte &#xE4;r min starka sida och d&#xE4;rf&#xF6;r vill jag nu ha hj&#xE4;lp. Vilka index b&#xF6;r jag s&#xE4;tta f&#xF6;rutom nycklarna, om n&#xE5;gra? Finns det b&#xE4;ttre och skonsammare s&#xE4;tt &#xE4;n <code>group_concat</code>?</p>