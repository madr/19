<!doctype html><html lang=sv><head><meta charset=UTF-8><title>Tv친 JavaScriptf칬rb칛ttringar jag inte klarar mig utan | Skrivna ord av Anders Ytterstr칬m.</title><meta name=viewport content="width=device-width"><link rel=stylesheet title="madr.se stilmall" href=../../madrse.css><link href=../../prenumerera.xml type=application/atom+xml rel=alternate title=madr.se><link rel=stylesheet title="madr.se stilmall" href=../madrse.css><link href=../prenumerera.xml type=application/atom+xml rel=alternate title=madr.se><link rel=canonical href=https://madr.se//2009/118/ ><meta property=og:title content="Tv친 JavaScriptf칬rb칛ttringar jag inte klarar mig utan"><meta property=og:type content=article><meta property=og:url content=https://madr.se//2009/118/ ><meta property=og:image content=https://madr.se/mugshot.jpg><meta property=og:site_name content="Skrivna ord av Anders Ytterstr칬m."></head><body><a href=#content class=skiplink>Hoppa till inneh친ll</a><header><a href=../../ rel=home><img class=portrait src=../../mugshot.jpg alt="Anders, september 2018."></a><p class=presentation>Anders 칛r en webbutvecklare och h친rdrockare som gillar br칛dspel, kaffe och 칬l. <a href=../../om/ rel=author>Om Anders Ytterstr칬m</a></p><nav><h2 class=visuallyhidden>Meny</h2><a class=nav__item href=../../bl/ >游뱆 Br칲tal Legend</a> <a class=nav__item href=../../evenemang/ >游늰 Evenemang</a> <a class=nav__item href=https://madr.github.io/mybgg/ >游 Br칛dspel</a> <a class=nav__item href=https://madr.github.io/urban-enigma/ >游 Styrketr칛ning</a></nav></header><main id=content><p class=alert--archived><i>Detta 칛r ett arkiverat inl칛gg, som importerats hit f칬r referens. Det kan se konstigt ut och inneh친lla utdaterad information eller inaktuella 친sikter.</i></p><article><h1>Tv친 JavaScriptf칬rb칛ttringar jag inte klarar mig utan</h1><p>L친t oss enas om en sak: JavaScript som ensam enhet har ibland h친l i sina implementationer. N칛r ett s친dant h친l st칬ts p친 kan man v칛lja att fly eller att t칛ppa till h친let. Jag delar h칛r med mig av tv친 친tg칛rder som g칬r JavaScript-utveckling litet mer angen칛mt.</p><p>I b친da fallen ut칬kas prototyper med nya egenskaper ist칛llet f칬r att skapa en global funktion.</p><h2>String.chunk()</h2><p>Chunks inneb칛r i sammanhanget att en stor m칛ngd delas upp i mindre, mer l칛tthanterliga m칛ngder. Jag f친r ibland det behovet med str칛ngar, d칛r jag tex vill s칛tta mellanslag i 1250500kr f칬r att g칬ra summan mer l칛ttl칛st.</p><p>F칬ljande kodrader ger oss den m칬jligheten:</p><pre><code>String.prototype.chunk = function(n) {
  if (typeof n=='undefined') n=2;
  return this.match(RegExp('.{1,'+n+'}','g'));
};
</code></pre><p>D친 detta 칛r en funktion som ska funka till str칛ngar 칛r det klokt att l칛gga funktionen till String-objektets prototype ist칛llet f칬r att g칬ra det till en global funktion. Det g칬r scriptandet mer konsekvent och placerar funktionen till r칛tt forum.</p><p>Plockas ettan ut i talet 1250500kr g친r det att stoppa in mellanslagen mycket r칛ttframt.</p><pre><code>var price = '1250500';
price = price.charAt(0) + ' ' + price.slice(1).chunk(3).join(' ');
</code></pre><h2>Date.getWeek()</h2><p>Date-objektet har en del trevliga egenskaper mot ett angivet datum. Objektet fattas dock st칬d f칬r att plocka ut aktuell vecka p친 ett 친r. Jag har st칬tt p친 det behovet ett antal g친nger, d친 s칛rskilt n칛r jag utvecklat badges med veckointervall.</p><p>Det 칛r dock inte k칛rnfysik att f친 till en kompletterande funktion.</p><pre><code>Date.prototype.getWeek = function() {
var onejan = new Date(this.getFullYear(),0,1);
return Math.ceil((((this - onejan) / 86400000) + onejan.getDay())/7);
}
</code></pre><p>칀terigen, det finns inget sk칛l att l칛gga en s친dan funktion globalt. Den kommer inte att funka p친 n친got annat 칛n datum och blir d칛rf칬r en metod i Date-objektets prototype, vilket g칬r det konsekvent att anv칛nda.</p><pre><code>var today = new Date();
alert(today.getWeekDay()); // 1
alert(today.getWeek());    // 14
</code></pre><p>Scripten kan anropas n칛r som helst, men l칛mpar sig troligtvis b칛st l칛ngst upp i en JS-fil som anropas tidigt.</p></article></main><aside><h2 class=h--aside>Senaste inl칛ggen</h2><ul class=recents><li class=recents__item><a href=../../2019/meta>Tuffa saker i senaste iterationen av madr.se</a></li><li class=recents__item><a href=../../2019/apps>Vad ber칛ttar mina program om mig?</a></li><li class=recents__item><a href=../../2019/ridderligheten>G칛rning i ridderlighetens namn</a></li><li class=recents__item><a href=../../2019/react-redux>Varf칬r och hur jag ska f칬rdjupa mig i React 2019</a></li><li class=recents__item><a href=../../2019/elixir>Varf칬r och hur jag ska fokusera p친 att l칛ra mig Elixir 2019</a></li></ul><h2 class=h--aside>Kommande evenemang</h2><ul class=upcoming><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Mayhem </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Fryshuset</span>, Stockholm </span><time datetime=2019-11-29T00:00:00Z class=upcoming__item__when itemprop=startDate><span>29</span> <span>nov</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Wardruna </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Annexet</span>, Stockholm </span><time datetime=2019-12-01T00:00:00Z class=upcoming__item__when itemprop=startDate><span>1</span> <span>dec</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Amon Amarth </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Annexet</span>, Stockholm </span><time datetime=2019-12-07T00:00:00Z class=upcoming__item__when itemprop=startDate><span>7</span> <span>dec</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Solstafir </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Fryshuset</span>, Stockholm </span><time datetime=2019-12-18T00:00:00Z class=upcoming__item__when itemprop=startDate><span>18</span> <span>dec</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Opeth </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Cirkus</span>, Stockholm </span><time datetime=2020-01-13T00:00:00Z class=upcoming__item__when itemprop=startDate><span>13</span> <span>jan</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Coraline </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Folkoperan</span>, Stockholm </span><time datetime=2020-02-05T00:00:00Z class=upcoming__item__when itemprop=startDate><span>5</span> <span>feb</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Gefle Metal Festival 4 </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Gasklockorna</span>, G칛vle </span><time datetime=2020-07-09T00:00:00Z class=upcoming__item__when itemprop=startDate><span>9</span> <span>jul</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Wacken Open Air 31 </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Wacken</span>, Tyskland </span><time datetime=2020-07-30T00:00:00Z class=upcoming__item__when itemprop=startDate><span>30</span> <span>jul</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Brutal Assault 25 </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Jarom캩콏</span>, Tjeckien </span><time datetime=2020-08-05T00:00:00Z class=upcoming__item__when itemprop=startDate><span>5</span> <span>aug</span></time></li></ul></aside><footer><p>Publicerades <time>2009-04-09</time>. <a href=https://creativecommons.org/licenses/by-sa/4.0/ lang=en>CC BY-SA 4.0</a> av Anders Ytterstr칬m sedan dec 2006. <a rel=alternate href=../../prenumerera.xml>Prenumerera</a>. Korrekt HTML5 och CSS 3.</p></footer></body></html>