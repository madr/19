<!doctype html><html lang=sv><head><meta charset=UTF-8><title>Hackad på AWS - en snabb redogörelse | Skrivna ord av Anders Ytterström.</title><meta name=viewport content="width=device-width"><link rel=stylesheet title="madr.se stilmall" href=../../madrse.css><link href=../../prenumerera.xml type=application/atom+xml rel=alternate title=madr.se><link rel=stylesheet title="madr.se stilmall" href=../madrse.css><link href=../prenumerera.xml type=application/atom+xml rel=alternate title=madr.se><link rel=canonical href=https://madr.se//2014/aws/ ><meta property=og:title content="Hackad på AWS - en snabb redogörelse"><meta property=og:type content=article><meta property=og:url content=https://madr.se//2014/aws/ ><meta property=og:image content=https://madr.se/mugshot.jpg><meta property=og:site_name content="Skrivna ord av Anders Ytterström."></head><body><a href=#content class=skiplink>Hoppa till innehåll</a><header><a href=../../ rel=home><img class=portrait src=../../mugshot.jpg alt="Anders, september 2018."></a><p class=presentation>Anders är en webbutvecklare och hårdrockare som gillar brädspel, kaffe och öl. <a href=../../om/ rel=author>Om Anders Ytterström</a></p><nav><h2 class=visuallyhidden>Meny</h2><a class=nav__item href=../../bl/ >🤘 Brütal Legend</a> <a class=nav__item href=../../evenemang/ >📅 Evenemang</a> <a class=nav__item href=https://madr.github.io/mybgg/ >🎲 Brädspel</a> <a class=nav__item href=https://madr.github.io/urban-enigma/ >🦾 Styrketräning</a></nav></header><main id=content><article><h1>Hackad på AWS - en snabb redogörelse</h1><p>Så, följande har hänt:</p><ol><li>Under september månad kapades mitt konto på Amazon Web Services (AWS).</li><li><strong>Onsdagen den 24 september</strong> ombads jag av ett mail från AWS att byta lösenord, ta bort mina säkerhetsnycklar och se om något konstigt fanns på mitt konto.</li><li><strong>Fredagen den 26 september</strong> fick jag ett telefonsamtal från AWS support där de upplyste mig om att jag blivit utsatt för intrång på EC2 och hur jag kunde logga in och stänga ner de av mig ej skapade tjänsterna, samt hur jag skulle driva detta vidare. Det var när jag gjorde detta som jag fick se vad intrånget ställt till med - Ec2-missbruk för ungefär $18.000.</li><li>Samma fredag, efter åtgärderna telefonsamtalet innehöll vidtagits, mailar jag Amazon och skriver om hela händelseförloppet.</li><li><strong>Söndagen den 28 september</strong> får jag ytterligare instruktioner om att försäkra mig om att allt intrånget skapat verkligen är avstängt. I samband med detta skapades ett ärende i deras Support center.</li><li>Från 29 september till 2 oktober uppdaterar Amazon mig via ärendet. Deras ambition är att se till att jag inte behöver betala något av de $18.000 som intrånget orsakade.</li><li>Idag, den 8 oktober, blev det klart att jag inte behöver betala något.</li></ol><p>Några frågor som jag här ska besvara:</p><p><strong>Hur fick hackern tillgång till mitt konto?</strong><br>Mitt lösenord och mina säkerhetsnycklar är autogenererat och unikt för AWS. Det ligger sparat i en lösenordsfil som ligger på Dropbox med tvåstegsverifiering påslaget. Tisdagen den 23 september råkade jag däremot av misstag pusha upp mina säkerhetsnycklar till ett publikt repo på Github. Jag upptäckte detta ett par timmar senare och tog genast bort hela repot. Min misstanke är att en bot lyckades komma över dem under den tidsramen.</p><p><strong>Vad bestod intrånget av?</strong><br>20 maxade EC2-instanser per region (åtta stycken), samt ytterligare några i Spot Request Queue (dessa var köade för en plats i sin region). Samtliga dessa skapades innan jag bytte lösenord på onsdagen den 24 september och ingenting mer skapades efter det. Jag upptäckte dock inte EC2-maskinerna förrän samtalet på fredagen den 26 september då jag inte använde EC2 och därför inte tänkte på att kika där i och med att jag blev ombedd att byta lösenord på onsdagen.</p><p><strong>Hur hanterade AWS det hela?</strong><br>I mina ögon fläckfritt - de uppdaterade mig löpande och var de som tog kontakt med mig så snart de misstänkte intrång, via såväl mail som telefon. De var också snabba med att starta en utredning och var från början inställda på att detta inte skulle debiteras mig. Deras instruktioner till mig var tydliga och pedagogiska, och jag kunde snabbt reagera på de åtgärder som var ålagda mig.</p><h2>Lärdomarna</h2><ul><li>Skriv <strong>aldrig</strong> AWS-säkerhetsnyckeln direkt i kod - ens i de minsta snabbhacken! Håll det borta med nolltolerans så hamnar det aldrig i någon versionshantering av misstag. I mitt fall var det några rader JavaScript jag fuskade ihop på en lunchrast. Knappast värt det för att utsätta sig själv för risken att bi utsatt för intrång.</li><li>Sätt upp ett <strong>billing alarm</strong> på AWS - det hade jag inte gjort, och det hade besparat mig den långa tiden innan jag kunde reagera. Numera har jag ett billing alarm på $1 som kommer att spamma mig så snart något drar iväg på AWS.</li></ul></article></main><aside><h2 class=h--aside>Senaste inläggen</h2><ul class=recents><li class=recents__item><a href=../../2019/meta>Tuffa saker i senaste iterationen av madr.se</a></li><li class=recents__item><a href=../../2019/apps>Vad berättar mina program om mig?</a></li><li class=recents__item><a href=../../2019/ridderligheten>Gärning i ridderlighetens namn</a></li><li class=recents__item><a href=../../2019/react-redux>Varför och hur jag ska fördjupa mig i React 2019</a></li><li class=recents__item><a href=../../2019/elixir>Varför och hur jag ska fokusera på att lära mig Elixir 2019</a></li></ul><h2 class=h--aside>Kommande evenemang</h2><ul class=upcoming><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Mayhem </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Fryshuset</span>, Stockholm </span><time datetime=2019-11-29T00:00:00Z class=upcoming__item__when itemprop=startDate><span>29</span> <span>nov</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Wardruna </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Annexet</span>, Stockholm </span><time datetime=2019-12-01T00:00:00Z class=upcoming__item__when itemprop=startDate><span>1</span> <span>dec</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Amon Amarth </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Annexet</span>, Stockholm </span><time datetime=2019-12-07T00:00:00Z class=upcoming__item__when itemprop=startDate><span>7</span> <span>dec</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Solstafir </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Fryshuset</span>, Stockholm </span><time datetime=2019-12-18T00:00:00Z class=upcoming__item__when itemprop=startDate><span>18</span> <span>dec</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Opeth </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Cirkus</span>, Stockholm </span><time datetime=2020-01-13T00:00:00Z class=upcoming__item__when itemprop=startDate><span>13</span> <span>jan</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Coraline </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Folkoperan</span>, Stockholm </span><time datetime=2020-02-05T00:00:00Z class=upcoming__item__when itemprop=startDate><span>5</span> <span>feb</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Gefle Metal Festival 4 </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Gasklockorna</span>, Gävle </span><time datetime=2020-07-09T00:00:00Z class=upcoming__item__when itemprop=startDate><span>9</span> <span>jul</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Wacken Open Air 31 </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Wacken</span>, Tyskland </span><time datetime=2020-07-30T00:00:00Z class=upcoming__item__when itemprop=startDate><span>30</span> <span>jul</span></time></li><li class=upcoming__item itemscope itemtype=http://schema.org/Event><strong itemprop=name class=upcoming__item__what>Brutal Assault 25 </strong><span class=upcoming__item__where itemprop=location itemscope itemtype=http://schema.org/Place><span itemprop=name>Jaroměř</span>, Tjeckien </span><time datetime=2020-08-05T00:00:00Z class=upcoming__item__when itemprop=startDate><span>5</span> <span>aug</span></time></li></ul></aside><footer><p>Publicerades <time>2014-10-08</time>. <a href=https://creativecommons.org/licenses/by-sa/4.0/ lang=en>CC BY-SA 4.0</a> av Anders Ytterström sedan dec 2006. <a rel=alternate href=../../prenumerera.xml>Prenumerera</a>. Korrekt HTML5 och CSS 3.</p></footer></body></html>